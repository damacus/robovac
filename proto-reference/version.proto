syntax = "proto3";

// option optimize_for = LITE_RUNTIME;

package proto.cloud;

enum Global {
    NONE = 0;
    PROTO_VERSION = 1;  // 目前是1，有变更则递增 [EN: Currently 1, increment on changes]
}

// 设备支持的协议 [EN: Protocols supported by device]
message ProtoInfo {
    uint32 global_verison = 1;  // 使用 Global 的 PROTO_VERSION [EN: Use Global's PROTO_VERSION]

    message Module {
        uint32 version = 1;
        uint32 options = 2;
    }

    enum CollectDustOptionBit {
        COLLECT_DUST_APP_START = 0;  // 此位为1时表示带App一键启动集尘功能，0表示不带 [EN: When this bit is 1, it means with App one-click start dust collection feature, 0 means without]
    }
    /**
     * 对应 station.proto 文件 [EN: Corresponds to station.proto file]
     * version 1 使用 CollectDustCfg [EN: version 1 uses CollectDustCfg]
     * version 2 使用 CollectDustCfgV2, option定义见CollectDustOptionBit [EN: version 2 uses CollectDustCfgV2, option defined in CollectDustOptionBit]
     */
    Module collect_dust = 2;

    enum MapFormatOptionBit {
        MAP_FORMAT_ANGLE = 0;         // 地图存在 angle 字段 [EN: Map has angle field]
        MAP_FORMAT_RESERVE_MAP = 1;   // 固件适配关闭多地图能选择保留地图 [EN: Firmware adapted to allow selecting reserved map when closing multi-map]
        MAP_FORMAT_DEFAULT_NAME = 2;  // 固件支持地图和房间默认名称 [EN: Firmware supports map and room default names]
    }
    /**
     * version 1 地图增加 angle 字段（仅使用 Module.version） [EN: version 1 map adds angle field (only uses Module.version)]
     * version 2 地图使用 option 定义见 MapFormatOptionBit [EN: version 2 map uses option defined in MapFormatOptionBit]
     */
    Module map_format = 3;

    enum ContinueCleanOptionBit {
        SMART_CONTINUE_CLEAN = 0;     // 智能断点续扫 [EN: Smart resume cleaning]
    }
    /**
     * version 1 断点续扫使用 option 定义见 ContinueCleanOptionBit [EN: version 1 resume cleaning uses option defined in ContinueCleanOptionBit]
     */
    Module continue_clean = 4;

    /**
     * version 1 支持割毛发功能 [EN: version 1 supports hair cutting feature]
     */
    Module cut_hair = 5;

    enum TimingOptionBit {
        SCHEDULE_ROOMS_CLEAN_CUSTOM = 0;    // 预约房间清扫支持每个房间自定义参数 [EN: Scheduled rooms cleaning supports custom parameters for each room]
        SCHEDULE_SCENE_CLEAN = 1;           // 预约场景清扫 [EN: Scheduled scene cleaning]
    }
    /**
     * version 1 定时功能使用 option 定义见 TimingOptionBit [EN: version 1 schedule feature uses option defined in TimingOptionBit]
     */
    Module timing = 6;
}

// App 支持的功能 [EN: Features supported by App]
message AppFunction {
    message Module {
        uint32 version = 1;
        uint32 options = 2;
    }

    enum MultiMapsFunctionBit {
        REMIND_MAP_SAVE = 0;  // 此位为1时表示App的拥有能力是地图提醒保存 [EN: When this bit is 1, it means App has the capability of map save reminder]
    }
    /**
     * version 1 使用 option 定义见 MultiMapsFunctionBit [EN: version 1 uses option defined in MultiMapsFunctionBit]
     */
    Module multi_maps= 2;

    enum OptimizationFunctionBit {
        PATH_HIDE_TYPE = 0;  // 此位为1时表示App支持路径隐藏类型 [EN: When this bit is 1, it means App supports path hide type]
    }
    /**
     * version 1 使用 option 定义见 OptimizationFunctionBit [EN: version 1 uses option defined in OptimizationFunctionBit]
     */
    Module optimization = 3;
}
