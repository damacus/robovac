syntax = "proto3";

package proto.cloud;

// Request
message QueryUpgradeStatus {
    // 无参数 [EN: No parameters]
}

// Response
message UpgradeStatus {
    enum Status {
        IDLE = 0; // 空闲状态 [EN: Idle state]
        DOWNLOADING = 1; // 下载中 [EN: Downloading]
        DOWNLOAD_COMPLETE = 2; // 下载完成 [EN: Download complete]
        DOWNLOAD_FAILED = 3; // 下载失败 [EN: Download failed]
        INSTALLING = 4; // 安装中 [EN: Installing]
        INSTALL_COMPLETE = 5; // 安装完成 [EN: Installation complete]
        INSTALL_FAILED = 6; // 安装失败 [EN: Installation failed]
    }
    Status status = 1;
    uint32 progress = 2; // 下载进度, 0-100% [EN: Download progress, 0-100%]

    enum Error{
        NONE = 0;
        NOT_IN_STATION = 1; // 不在充电桩 [EN: Not on charging dock]
        BATTERY_NOT_ENOUGH = 2; // 电量不足 [EN: Battery not enough]
        MCU_INSTALL_FAILED = 3; // MCU安装失败 [EN: MCU installation failed]
        AP_INSTALL_FAILED = 4; // AP安装失败 [EN: AP installation failed]
        STATION_NOT_CONNECTED = 5; // 基站未连接 [EN: Station not connected]
        STATION_INSTALL_FAILED = 6; // 基站安装失败 [EN: Station installation failed]
    }
    string error = 3;
}
